<div class="smart-widget widget-dark-blue">
	<div class="smart-widget-header">订单管理</div>
	<div class="smart-widget-inner">
		<div class="smart-widget-body">
			<button type="button" class="btn btn-success btn-sm" ng-click="isConditionCollapsed = !isConditionCollapsed">
				<i class="fa fa-search m-right-xs"></i>查询
			</button>
			<button ng-click="exportOrder()" class="btn btn-success btn-sm">
                <i class="ion-plus m-right-xs"></i>导出
            </button>
		</div>
		<div uib-collapse="isConditionCollapsed" style="padding-left: 20px;padding-right: 20px;">
			<div class="panel">
				<div class="panel-body">
					<div style="float:right; margin-top: 7px;">
						<a href="javascript:" ng-click="isConditionCollapsed = !isConditionCollapsed" class="widget-remove-option"><i class="fa fa-times"></i></a>
					</div>
					<div>
					<form class="form-inline no-margin" novalidate>
						<div class="form-group">
						  <input ng-model="condition.name" type="text" class="form-control input-sm" placeholder="商品名称">
								<input ng-model="condition.userRealname" type="text" class="form-control input-sm" placeholder="姓名">
								<input ng-model="condition.userNickname" type="text" class="form-control input-sm" placeholder="昵称">
								<input ng-model="condition.userMobile" type="text" class="form-control input-sm" placeholder="电话">
                                <select ng-model="condition.state" ng-options="state.value as state.name for state in states" class="form-control input-sm">
                                    <option></option>
                                </select>
						</div>
						<button ng-click="query(condition)" class="btn btn-sm btn-success"><i class="fa fa-search m-right-xs"></i>查询</button>
						<button ng-click="cleanCondition()" class="btn btn-sm btn-warning"><i class="ion-close m-right-xs"></i>清空</button>
					</form>
					</div>
				</div>
			</div>
		</div>
		
		<div ng-show="pageInfo.totalElements > 0">
			<div class="smart-widget-body">
				<table class="table table-hover">
					<thead>
						<tr>
							<th width="50">序号</th>
							<th width="50">id</th>
							<th width="100">下单时间</th>
							<th>商品名称</th>
							<th width="80">客户昵称</th>
							<th width="80">客户电话</th>
							<th width="80">客户微信</th>
							<th width="80">订单金额</th>
							<th width="80">订单状态</th>
							<th width="250">操作</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat = "order in orders">
							<td>{{$index+1}}</td>
							<td>{{order.id}}</td>
							<td>{{order.createdTime | date:'yyyy-MM-dd HH:mm:ss'}}</td>
							<td>{{order.goodsName}}</td>
							<td>{{order.userInfo.nickname}}</td>
							<td>{{order.userInfo.mobile}}</td>
							<td>{{order.userInfo.weixin}}</td>
							<td>{{order.amount | currency}}</td>
							<td>{{order.state | orderState}}</td>
							<td>
								
								<button class="btn btn-info btn-xs" ng-click="updateState(order, 'WORKING')">
                                    <i class="ion-edit m-right-xs"></i>接单
                                </button>
                                <button class="btn btn-success btn-xs" ng-click="updateState(order, 'COMPLETE')">
                                    <i class="ion-edit m-right-xs"></i>完成
                                </button>
                                <button class="btn btn-danger btn-xs" ng-click="updateState(order, 'CANCEL')">
                                    <i class="ion-edit m-right-xs"></i>取消
                                </button>
                                
							</td>
						</tr>
					</tbody>
				</table>
			</div>
			<div style="margin-top: -30px; margin-left: 20px; margin-bottom: 20px;">
				<uib-pagination total-items="pageInfo.totalElements" num-pages="pageInfo.totalPages" ng-model="pageInfo.page" max-size="pageInfo.maxSize" 
					class="pagination-sm" boundary-links="true" force-ellipses="true" ng-change="query()" ng-disabled="pageInfo.totalElements <= 0" 
					first-text="首页" last-text="末页" next-text="后页" previous-text="前页" boundary-link-numbers="true"></uib-pagination>
			</div>
		</div>
		<div class="smart-widget-body" ng-hide="pageInfo.totalElements > 0">
			<div class="alert alert-warning alert-dismissible" role="alert">
		     	<i class="fa fa-exclamation-circle m-right-xs"></i> <strong>没有查询到任何数据,请修改查询条件并重试</strong>
		    </div>
		</div>
	</div>
</div>